function setRealContentHeight(){var e=$.mobile.activePage.find("div[data-role='header']:visible"),t=$.mobile.activePage.find("div[data-role='footer']:visible"),i=$.mobile.activePage.find("div.ui-content:visible:visible"),n=$(window).height(),o=n-(e.outerHeight()-1)-(t.outerHeight()-1);i.outerHeight()-e.outerHeight()-t.outerHeight()<=n&&(o-=i.outerHeight()-i.height()),$(".ui-content").height(o)}function get_classement(e,t){var i=urls.classement[e],n=[],o="";$("#page_classement h1").html("Classement "+e);var s=$("#page_classement .classement tbody");s.empty(),$.get(i,function(e){var i=0,a=$(e).find(".classement tbody tr");a.each(function(){var e=$(this);o={},$scores=e.find("td"),o.nom=$($scores[0]).text(),o.joue=$($scores[1]).text(),o.gagne=$($scores[2]).text(),o.egalite=$($scores[3]).text(),o.perdu=$($scores[4]).text(),o.marques=$($scores[5]).text(),o.encaisses=$($scores[6]).text(),o.difference=$($scores[7]).text(),o.points=$($scores[8]).text(),o.link=$($scores[0]).find("a").attr("href"),s.append("<tr class='equipe'><td><a href='#' class='equipe_link' data-url='"+o.link+"' data-nom='"+o.nom+"'>"+o.nom+"</a></td><td>"+o.joue+"</td><td>"+o.gagne+"</td><td>"+o.egalite+"</td><td>"+o.perdu+"</td><td>"+o.marques+"</td><td>"+o.encaisses+"</td><td>"+o.difference+"</td><td>"+o.points+"</td></tr>")}),t(n)})}function get_equipe(e,t,i){liste_joueurs=[],$("#page_equipe h1").html(e);var n=$("#joueurs");n.empty(),$.get(t,function(e){var t=0,o=$(e).find(".player-row");o.each(function(){var e=$(this),t={};t.numero=e.find(".shirt-num").text(),t.nom=e.find(".container-player-row a").text(),t.place=e.find(".container-player-row div").text(),t.link=e.find(".container-player-row a").prop("href"),liste_joueurs.push(t),n.append("<li><a href='#' class='joueur_link' data-url='"+t.link+"' data-nom=\""+t.nom+'">#'+t.numero+" "+t.nom+"</a></li>")}),i(liste_joueurs)})}function get_joueur(e,t,i){joueur={},$("#page_joueur h1").html(e);var n=$("#joueur");n.empty(),$.get(t,function(e){var t=0,o=$(e).find(".season-stats li");joueur.joues=$(o[0]).text(),joueur.gagnes=$(o[1]).text(),joueur.perdus=$(o[2]).text(),joueur.goals=$(o[3]).text(),joueur.assists=$(o[4]).text(),joueur.points=$(o[5]).text(),n.append("<li><a href='#'>Matchs joués <span class='ul-li-count'>"+joueur.joues+"</span></a></li>"),n.append("<li><a href='#'>Matchs gagnés <span class='ul-li-count'>"+joueur.gagnes+"</span></a></li>"),n.append("<li><a href='#'>Matchs perdus <span class='ul-li-count'>"+joueur.perdus+"</span></a></li>"),n.append("<li><a href='#'>Goals <span class='ul-li-count'>"+joueur.goals+"</span></a></li>"),n.append("<li><a href='#'>Assists <span class='ul-li-count'>"+joueur.assists+"</span></a></li>"),n.append("<li><a href='#'>Points <span class='ul-li-count'>"+joueur.points+"</span></a></li>"),i(joueur)})}function init(){$(document).on("pageshow",setRealContentHeight),$(document).on("pageshow",function(){$(".nav-menu").load("menu.html",function(){$(".nav-menu").panel(),$(".nav-menu ul").listview(),$(".nav-menu").trigger("updatelayout")})}),$(document).on("click",".division",function(){$.mobile.loading("show",{text:"Chargement...",textVisible:!0,theme:"b",textonly:!1,html:""}),get_classement($(this).data("division"),function(){document.location="#page_classement",$.mobile.loading("hide")})}),$(document).on("click",".equipe_link",function(){$.mobile.loading("show",{text:"Chargement...",textVisible:!0,theme:"b",textonly:!1,html:""}),get_equipe($(this).data("nom"),$(this).data("url"),function(){document.location="#page_equipe",$("#page_equipe .joueurs").listview("refresh"),$.mobile.loading("hide")})}),$(document).on("click",".joueur_link",function(){$.mobile.loading("show",{text:"Chargement...",textVisible:!0,theme:"b",textonly:!1,html:""}),get_joueur($(this).data("nom"),$(this).data("url"),function(){document.location="#page_joueur",$("#joueur").listview({splitTheme:"b"}),$.mobile.loading("hide")})})}function log(e){$(".console").append("<div>"+e+"</div>")}var urls={classement:{d1:"http://www.fshbr.ch/competitions/index/1",d2:"http://www.fshbr.ch/competitions/index/2",d3a:"http://www.fshbr.ch/competitions/index/3",d3b:"http://www.fshbr.ch/competitions/index/4",juniors:"http://www.fshbr.ch/competitions/index/5",novices:"http://www.fshbr.ch/competitions/index/6",minis:"http://www.fshbr.ch/competitions/index/7"}},division="",equipe="";